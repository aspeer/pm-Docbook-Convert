<?xml version="1.0" encoding="UTF-8"?>
<refentry xmlns="http://docbook.org/ns/docbook" xmlns:db="http://docbook.org/ns/docbook" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:m="http://www.w3.org/1998/Math/MathML" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0">
  <refmeta>
    <refentrytitle>Docbook::Convert</refentrytitle>
    <manvolnum>3</manvolnum>
  </refmeta>
  <refnamediv>
    <refname>Docbook::Convert</refname>
    <refpurpose>Convert Docbook articles and refentry's to other formats such as Markup and POD</refpurpose>
  </refnamediv>
  <refsynopsisdiv>
    <programlisting>
      <command># Use on file handle
#
use Docbook::Convert;
open FILE, 'docbook.xml' or die $!;
print Docbook::Convert-&gt;markdown(*FILE);
print Docbook::Convert-&gt;pod(*FILE);

# Use on existing file
#
print Docbook::Convert-&gt;markdown_file('docbook.xml');

# Use on existing string
#
print Docbook::Convert-&gt;markdown($docbook);

# Specify output options
#
print Docbook::Convert-&gt;markdown($docbook, { meta_display_top=&gt;1 });</command>
    </programlisting>
  </refsynopsisdiv>
  <refsection>
    <title>Description</title>
    <para>Docbook::Convert Perl will convert between Docbook and other formats - currently Markdown and POD. It is intended to let authors write documentation in Docbook, and then output it to more easily publishable formats such as Markdown - or have it converted to POD and optionally merged into a perl programs or module.</para>
    <para>It currently supports as subset of Docbook tags, and its intent is to convert Docbook 4+ article and refentry templates with common entites into manual pages or other documentation.</para>
  </refsection>
  <refsection>
    <title>Methods</title>
    <para>The following public methods are supplied:</para>
    <variablelist>
      <varlistentry>
        <term>process($xml, \%opt)</term>
        <listitem>
          <para>Convert an XML string or file handle into a different format. Unless directed via the handler option the default conversion will be to Markdown</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>process_file($filename, \%opt)</term>
        <listitem>
          <para>Convert an XML file - specified in $filename - into a different format. As per the process method the default convertsion if not otherwise specified will be Markdown.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>markdown($xml, \%opt)</term>
        <listitem>
          <para>A shortcut to the process method with the Markdown handler implied</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>markdown_file</term>
        <listitem>
          <para>A shortcut to the process_file method with the Markdown handler implied</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>pod($xml, \%opt)</term>
        <listitem>
          <para>A shortcut to the process method with the POD handler implied</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>pod_file($xml, \%opt)</term>
        <listitem>
          <para>A shortcut to the process_file method with the POD handler implied</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </refsection>
  <refsection>
    <title>Options</title>
    <para>The following options can be supplied to the process methods as a hash reference as per the synopsis example:</para>
    <variablelist>
      <varlistentry>
        <term>meta_display_top</term>
        <listitem>
          <para>If the Docbook Refentry or Article contains metadata (author, publication date etc.) display it at the top of the file in "key: value" format. By default metadata is not displayed. Supply as boolean.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>meta_display_bottom</term>
        <listitem>
          <para>As per meta_display_top but output at bottom.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>meta_display_title</term>
        <listitem>
          <para>If the metadata is to be prefixed with a title supply as a string.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>meta_display_title_h_style</term>
        <listitem>
          <para>If a title is supplied the option will set which heading style is used to generate it. By default output is the equivalent of "Heading 1". Supported values are 'h1' through to 'h4'</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>no_html</term>
        <listitem>
          <para>Do not comingle HTML with the generated output. For some output handlers where the desired output outcome is not available natively HTML may be supplied (e.g. Markdown). Setting this option to 1 will suppress any HTML output. Naturally this may limit the completeness of any conversion</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>no_image_fetch</term>
        <listitem>
          <para>For some Docbook image entities attributes that control the scaling of images may be supplied. If they are found in some cases the images may need to be fetched to generate the appropriate HTML width paramaters. Setting this option to 1 will suppress any remote image fetching and thus will disable any image scaling in conversions.</para>
        </listitem>
      </varlistentry>
      <varlistentry>
        <term>no_warn_unhandled</term>
        <listitem>
          <para>By default Docbook entites that are not handled in the conversion process (because the code does not yet cater for them) generate a warning. Setting this option to 1 will suppress any warnings.</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </refsection>
  <refsection>
    <title>Environment</title>
    <para>The following environment variables will alter the behaviour or the module as per their Option equivalent:</para>
    <itemizedlist>
      <listitem>
        <para>META_DISPLAY_TOP</para>
      </listitem>
      <listitem>
        <para>META_DISPLAY_BOTTOM</para>
      </listitem>
      <listitem>
        <para>META_DISPLAY_TITLE</para>
      </listitem>
      <listitem>
        <para>META_DISPLAY_TITLE_H_STYLE</para>
      </listitem>
      <listitem>
        <para>NO_HTML</para>
      </listitem>
      <listitem>
        <para>NO_IMAGE_FETCH</para>
      </listitem>
      <listitem>
        <para>NO_WARN_UNHANDLED</para>
      </listitem>
    </itemizedlist>
  </refsection>
  <refsection>
    <title>Files</title>
    <para>The file <filename>&lt;sitelibpath&gt;/Docbook/Convert/Constants.pm</filename> contains global settings which influence the behaviour of the module. Whilst this file can be edited any changes will be overwritten if the module is updated. If a file named <filename>&lt;sitelibpath&gt;/Docbook/Convert/Constants.pm.local</filename> exists, then any entries in that file will override the local globals. The file format should be that of an anoymous hash reference, e.g file contents of:</para>
    <programlisting>{
    NO_HTML         =&gt; 1,
    NO_IMAGE_FETCH  =&gt; 1
}</programlisting>
    <para>Will change the defaults for the named globals. The syntax needs to be perl correct - check file has no errors when run against <command>perl -c -w &lt;dir&gt;/Constants.pm.local</command></para>
  </refsection>
  <refsection>
    <title>Caveats</title>
    <para>This module does not puport to handle all Docbook entity tags or templates. It operates on a limited subset of entity tags commonly used for describing manual pages for Perl modules and other Unix utilities.</para>
  </refsection>
  <refsection>
    <title>Author</title>
    <para>Andrew Speer <email>aspeer@cpan.org</email></para>
  </refsection>
  <refsection>
    <title>LICENSE and COPYRIGHT</title>
    <para>This file is part of Docbook::Convert.</para>
    <para>This software is copyright (c) 2025 by Andrew Speer &lt;andrew.speer@isolutions.com.au&gt;.</para>
    <para>This is free software; you can redistribute it and/or modify it underthe same terms as the Perl 5 programming language system itself.</para>
    <para>Full license text is available at:</para>
    <para>&lt;http://dev.perl.org/licenses/&gt;</para>
  </refsection>
</refentry>
